<% name = current_user == purchase.user ? 'You' : 'Someone' %>
<% if full_display %>
  <%= render purchase.want.wanted, plain: true %>
  <% if purchase.want.archived? %>
  <p>ALERT! <%= purchase.want.user.name %> removed this from their list 
  <%= local_relative_time(purchase.want.updated_at, type: 'weekday-or-date') %>.
  You can still gift it to them or cancel the gift.</p>
  <% end %>
<% end %>
<%= render 'purchases/purchase_details', purchase: purchase, name: name, recipient: purchase.want.user %>
<% if full_display %>
  <%= link_to "I have gifted this to #{purchase.want.user.name}", 
        gift_want_purchase_path(purchase.want, purchase),
        class: "btn btn-default",
        method: :post, remote: true, 
          data: {
          title: "Gifted", 
          message: "Only select this when you have given the gift to 
                  #{purchase.want.user.name}. They will confirm it has
                  been received.",
          confirm: "I have given this" } %>
  <%= link_to "Cancel this purchase", 
        want_purchase_path(purchase.want, purchase),
        class: "btn btn-default",
        method: :delete, remote: true, 
          data: {
          title: "Cancel", 
          message: "This will remove the purchase completely.",
          confirm: "I want to cancel this" } %>
<% else %>
  <p>Don't tell <%= purchase.want.user.name %>, they haven't received it yet!</p>
<% end %>